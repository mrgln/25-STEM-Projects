# Урок 11. Волшебная лампа

## Теория  

«Волшебная лампа» — это проект, в котором лампа (или светодиод) реагирует на наши действия особым образом: может менять яркость, цвет или включаться от хлопка в ладоши.  
Мы можем реализовать её на Arduino несколькими способами:  

1. **С плавной регулировкой яркости** — управление светодиодом через потенциометр.  
2. **С управлением жестами/хлопком** — если есть микрофонный датчик, можно сделать лампу, которая реагирует на звук.  
3. **С эффектами** — плавное «дыхание», смена цветов, режим «ночника».  

В этом уроке сделаем базовый вариант — лампа с плавным изменением яркости через потенциометр.  

---

## Интересные факты  

- Первая электрическая лампа накаливания была создана в XIX веке, и с тех пор «лампа» стала символом идеи и вдохновения.  
- Слово «лампа» часто используется в культуре как образ «озарения» — загорающаяся лампочка над головой героя означает, что он придумал решение.  
- В восточных сказках «волшебная лампа» ассоциируется с исполнением желаний. На Arduino мы можем создать свою «магическую лампу», которая реагирует на прикосновения или жесты.  

---

## Практика  

### Материалы  

- Arduino Uno (или совместимая).  
- Светодиод высокой яркости (или RGB-светодиод).  
- Резистор 220 Ом.  
- Потенциометр 10 кОм.  
- Макетная плата, провода.  

### Подключение  

1. Светодиод: анод через резистор → пин D9 (PWM), катод → GND.  
2. Потенциометр:  
   - крайние выводы → 5V и GND,  
   - средний вывод → A0.  

---

## Программный код (управление яркостью)

```cpp
// Урок 11: Волшебная лампа
// Управление яркостью светодиода через потенциометр

int ledPin = 9;
int potPin = A0;
int value = 0;

void setup() {
  pinMode(ledPin, OUTPUT);
}

void loop() {
  value = analogRead(potPin);          // считываем значение потенциометра (0–1023)
  int brightness = map(value, 0, 1023, 0, 255); // переводим в диапазон PWM
  analogWrite(ledPin, brightness);     // задаем яркость
}
```

Эксперименты

Измените диапазон яркости: сделайте так, чтобы лампа никогда не гасла полностью, а лишь слегка тускнела.
Подключите RGB-светодиод вместо обычного и сделайте плавную смену цветов.
Добавьте кнопку: при коротком нажатии лампа переключает режим (ручной контроль / дыхание / случайные цвета).
Если есть микрофонный датчик, реализуйте «лампу, реагирующую на хлопок».
Сделайте так, чтобы лампа «помнила» последнее состояние (яркость или цвет) и включалась в нём.

Задание для самостоятельной работы

Нарисуйте схему подключения светодиода и потенциометра.
Составьте таблицу: какие значения потенциометра соответствуют какой яркости лампы.
Реализуйте «ночник»: лампа включается мягко, светит с небольшой яркостью и сама гаснет через 1 минуту.
Добавьте режим «цветотерапии» — лампа медленно переливается всеми цветами радуги.
Сделайте «интерактивную лампу»: лампа загорается, если рядом помахать рукой (с датчиком движения, если есть).
