# Урок 12. Умный кулер

## Теория  

Кулер (вентилятор) используется для охлаждения компьютеров, блоков питания и других устройств.  
Но не всегда нужно, чтобы он работал на полной мощности — ведь это шумно и расходует энергию.  

**Умный кулер** — это система, в которой вентилятор включается или меняет скорость в зависимости от температуры.  
Принцип работы:  
1. Датчик температуры измеряет окружающую среду.  
2. Arduino принимает решение — включить или выключить кулер, либо изменить его скорость.  
3. Кулер работает только при необходимости.  

---

## Интересные факты  

- Первые вентиляторы для компьютеров появились в 1960-х годах.  
- В современных видеокартах кулеры умеют полностью выключаться на низких нагрузках — это называется «zero fan mode».  
- В автомобилях вентиляторы радиатора управляются электронным блоком в зависимости от температуры двигателя.  
- Умные кулеры помогают экономить электроэнергию и продлевают срок службы устройств.  

---

## Практика  

### Материалы  

- Arduino Uno (или совместимая).  
- Вентилятор 5V (или мотор + пропеллер из набора).  
- Транзистор (например, NPN 2N2222 или BC547) для управления вентилятором.  
- Диод 1N4007 (обратная защита).  
- Резистор 220 Ом.  
- Датчик температуры (NTC-термистор или модуль LM35).  
- Макетная плата, провода.  

### Подключение (вариант с термистором и транзистором)  

1. Вентилятор + → 5V.  
2. Вентилятор – → коллектор транзистора.  
3. Эмиттер транзистора → GND.  
4. База транзистора → через резистор 220 Ом → пин D9.  
5. Диод параллельно вентилятору (катод к +, анод к –).  
6. Термистор: один вывод → 5V, второй → A0 и через резистор 10 кОм → GND.  

---

## Программный код (включение кулера при нагреве)

```cpp
// Урок 12: Умный кулер
// Кулер включается при температуре выше 30 °C

int fanPin = 9;       // управление вентилятором через транзистор
int thermPin = A0;    // термистор
int value = 0;

void setup() {
  pinMode(fanPin, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  value = analogRead(thermPin); // считываем значение термистора

  // простая шкала (не точная температура, а условный уровень)
  if (value < 500) {
    digitalWrite(fanPin, LOW);  // кулер выключен
    Serial.println("Кулер: OFF");
  } else {
    digitalWrite(fanPin, HIGH); // кулер включен
    Serial.println("Кулер: ON");
  }

  delay(500);
}
```

Программный код (умное управление скоростью через PWM)

```cpp
// Кулер с регулировкой скорости
// Чем выше температура, тем быстрее крутится вентилятор

int fanPin = 9;
int thermPin = A0;
int value = 0;

void setup() {
  pinMode(fanPin, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  value = analogRead(thermPin);   // 0–1023
  int speed = map(value, 300, 700, 0, 255); // перевод в 0–255
  speed = constrain(speed, 0, 255);

  analogWrite(fanPin, speed);

  Serial.print("Температура (условно): ");
  Serial.print(value);
  Serial.print(" | Скорость кулера: ");
  Serial.println(speed);

  delay(500);
}

```

Эксперименты

Подогрейте термистор пальцами или дыханием и наблюдайте, как включается/усиливается кулер.
Измените порог включения (например, с 500 на 400 или 600) и проверьте разницу.
Добавьте светодиод-индикатор: горит, когда кулер работает.
Реализуйте «турбо-режим» по кнопке: при нажатии кулер включается на полную мощность независимо от температуры.
Попробуйте подключить два кулера: один включается при средней температуре, второй при высокой.

Задание для самостоятельной работы

Нарисуйте схему подключения кулера через транзистор и термистор.
Составьте таблицу: значения датчика и соответствующая скорость вентилятора.
Реализуйте функцию «авто-выключение»: кулер выключается через 5 минут работы, если температура нормализовалась.
Если есть датчик LM35 или DS18B20, используйте его для более точного измерения температуры.
Сделайте проект «умный кулер для ноутбука» — вентилятор включается только при перегреве и плавно регулирует скорость.
