# Урок 22. Цифровая линейка

## Теория  

Линейка — инструмент для измерения длины.  
Цифровая линейка — это электронное устройство, которое позволяет измерять расстояние и отображать его на дисплее или в компьютере.  

На Arduino можно реализовать цифровую линейку с помощью **ультразвукового датчика HC-SR04**.  
Принцип работы:  
1. Датчик посылает ультразвуковой импульс.  
2. Импульс отражается от объекта и возвращается.  
3. Arduino рассчитывает расстояние по времени прохождения сигнала.  

Такую «линейку» можно использовать для измерения расстояний в пределах 2–300 см.  

---

## Интересные факты  

- Первые электронные измерительные устройства на ультразвуке появились в 1970-х годах.  
- Современные дальномеры могут измерять расстояния до 200 метров с лазерной точностью.  
- Ультразвуковой метод измерения также применяется для измерения уровня жидкости в резервуарах.  
- В телефонах используются **лазерные или ToF-сенсоры** для измерения расстояния до объектов и для фокусировки камеры.  

---

## Практика  

### Материалы  

- Arduino Uno (или совместимая).  
- Ультразвуковой датчик HC-SR04.  
- ЖК-дисплей 16x2 (с модулем I2C) или OLED (опционально).  
- Макетная плата, провода.  

### Подключение (HC-SR04 + LCD I2C)  

- HC-SR04: VCC → 5V, GND → GND, TRIG → D3, ECHO → D4.  
- LCD (I2C): SDA → A4, SCL → A5, VCC → 5V, GND → GND.  

---

## Программный код (без дисплея, в Serial Monitor)

```cpp
// Урок 22: Цифровая линейка
// Измерение расстояния с HC-SR04 и вывод в Serial Monitor

int trigPin = 3;
int echoPin = 4;

void setup() {
  Serial.begin(9600);
  pinMode(trigPin, OUTPUT);
  pinMode(echoPin, INPUT);
}

void loop() {
  long duration, distance;
  
  // Посылаем ультразвук
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);

  // Считаем время возвращения
  duration = pulseIn(echoPin, HIGH);
  
  // Перевод в сантиметры
  distance = duration * 0.034 / 2;
  
  Serial.print("Расстояние: ");
  Serial.print(distance);
  Serial.println(" см");

  delay(500);
}
```
Программный код (с выводом на LCD 16x2 I2C)

```cpp
#include <Wire.h>
#include <LiquidCrystal_I2C.h>

LiquidCrystal_I2C lcd(0x27, 16, 2);

int trigPin = 3;
int echoPin = 4;

void setup() {
  pinMode(trigPin, OUTPUT);
  pinMode(echoPin, INPUT);
  lcd.init();
  lcd.backlight();
  lcd.setCursor(0,0);
  lcd.print("Цифровая линейка");
}

void loop() {
  long duration, distance;
  
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);

  duration = pulseIn(echoPin, HIGH);
  distance = duration * 0.034 / 2;

  lcd.setCursor(0,1);
  lcd.print("Дистанция: ");
  lcd.print(distance);
  lcd.print(" см   ");
  
  delay(500);
}

```

Эксперименты

Измерьте разные предметы в комнате и сравните результат с обычной линейкой.
Попробуйте вывести результат не в сантиметрах, а в миллиметрах или дюймах.
Измените код так, чтобы при расстоянии меньше 10 см загорался светодиод.
Добавьте «режим рулетки»: нажатием кнопки фиксируется текущее расстояние, а второе измерение показывает разницу.
Попробуйте подключить OLED-дисплей и вывести результат в более красивом виде.

Задание для самостоятельной работы

Нарисуйте схему подключения HC-SR04 и LCD.
Составьте таблицу: предмет → измерение линейкой → измерение цифровой линейкой.
Сделайте «умное предупреждение»: при слишком маленьком расстоянии звучит сигнал.
Реализуйте «запоминание» минимального и максимального значения измерений.
Сделайте проект «электронная рулетка»: кнопкой фиксируйте начальную точку и измеряйте разницу до конечной.
