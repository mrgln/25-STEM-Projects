# Урок 20. Автоматическая дверь

## Теория  

Автоматическая дверь — это система, которая открывается и закрывается без участия человека.  
Мы встречаем такие двери в магазинах, офисах, метро.  

На Arduino её можно реализовать так:  
- **Датчик движения (PIR)** или **ультразвуковой датчик** фиксирует приближение человека.  
- Arduino подаёт сигнал на **сервопривод**, который открывает дверь.  
- Через несколько секунд дверь автоматически закрывается.  

---

## Интересные факты  

- Первые автоматические двери были изобретены в 1954 году и работали на фотоэлементах.  
- Сегодня двери используют датчики движения, давления или камеры.  
- Автоматические двери применяются в медицине для стерильных помещений и для удобства людей с ограниченными возможностями.  
- В «умных домах» автоматические двери могут работать по Bluetooth или Wi-Fi, реагируя на смартфон хозяина.  

---

## Практика  

### Материалы  

- Arduino Uno (или совместимая).  
- Сервопривод (SG90 или аналогичный).  
- PIR-датчик движения или ультразвуковой HC-SR04.  
- Макетная плата, провода.  

### Подключение (вариант с PIR)  

1. PIR-датчик → выход к D2, питание 5V и GND.  
2. Серво → сигнал к D9, питание 5V, GND.  

---

## Программный код (вариант с PIR)

```cpp
// Урок 20: Автоматическая дверь (с датчиком движения)

#include <Servo.h>

Servo door;

int pirPin = 2;
int posOpen = 90;   // угол открытия двери
int posClose = 0;   // угол закрытия двери

void setup() {
  pinMode(pirPin, INPUT);
  door.attach(9);
  door.write(posClose); // дверь закрыта
  Serial.begin(9600);
}

void loop() {
  int motion = digitalRead(pirPin);

  if (motion == HIGH) {
    Serial.println("Обнаружено движение! Открываем дверь...");
    door.write(posOpen);
    delay(3000); // дверь открыта 3 секунды
    Serial.println("Закрываем дверь...");
    door.write(posClose);
  }
}
```

Программный код (вариант с ультразвуковым датчиком)

```cpp
// Автоматическая дверь с ультразвуковым датчиком HC-SR04

#include <Servo.h>

Servo door;

int trigPin = 3;
int echoPin = 4;
int distance;

void setup() {
  pinMode(trigPin, OUTPUT);
  pinMode(echoPin, INPUT);
  door.attach(9);
  door.write(0);
  Serial.begin(9600);
}

void loop() {
  distance = getDistance();

  if (distance > 0 && distance < 30) { // если объект ближе 30 см
    Serial.println("Человек рядом! Открываем дверь...");
    door.write(90);
    delay(3000);
    Serial.println("Закрываем дверь...");
    door.write(0);
  }
}

int getDistance() {
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);

  long duration = pulseIn(echoPin, HIGH);
  int dist = duration * 0.034 / 2;
  return dist;
}

```

Эксперименты

Измените угол открытия двери (например, 120° вместо 90°).
Установите разное время задержки для закрытия двери.
Реализуйте ручной режим: кнопкой можно открыть/закрыть дверь.
Добавьте светодиод-индикатор: горит, когда дверь открыта.
Сделайте «режим безопасности»: если движение фиксируется более 10 секунд подряд, дверь остаётся открытой.

Задание для самостоятельной работы

Нарисуйте схему подключения автоматической двери (сервопривод + датчик).
Составьте таблицу: расстояние → действие (дверь открыта/закрыта).
Реализуйте «двойной датчик»: дверь открывается только если PIR и ультразвуковой датчик одновременно фиксируют движение.
Добавьте звуковой сигнал: при открытии двери звучит короткий сигнал, при закрытии — длинный.
Сделайте «умный вход»: дверь открывается только при правильной команде из Serial Monitor (пароль).
