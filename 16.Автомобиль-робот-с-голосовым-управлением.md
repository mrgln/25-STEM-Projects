# Урок 16. Автомобиль-робот с голосовым управлением

## Теория  

Автомобиль-робот — это платформа на колесах с моторчиками, которой управляет микроконтроллер.  
Чтобы сделать управление интереснее, мы можем подключить **голосовое управление**.  

В этом проекте мы будем использовать:  
- **Модуль распознавания речи** (например, **Elechouse Voice Recognition Module V3** или аналогичные).  
- Arduino для обработки команд.  
- Драйвер моторов (**L298N** или **L293D**) для управления двигателями.  

Принцип работы:  
1. Голосовой модуль «слушает» команды, обученные заранее (например: «вперёд», «назад», «влево», «вправо», «стоп»).  
2. Arduino получает цифровой сигнал от модуля.  
3. В зависимости от команды, Arduino управляет моторами автомобиля.  

---

## Интересные факты  

- Первые системы голосового управления появились в 1950-х годах (Bell Labs).  
- В современных автомобилях голосовое управление используется для мультимедиа и навигации.  
- Голосовое управление активно применяется в роботах для людей с ограниченными возможностями.  
- Сегодня такие технологии лежат в основе умных колонок (Alexa, Google Home, Алиса).  

---

## Практика  

### Материалы  

- Arduino Uno (или совместимая).  
- Платформа 2WD (2 двигателя и колёса, шасси).  
- Драйвер моторов **L298N** или **L293D**.  
- Модуль голосового управления **Voice Recognition V3** (или аналогичный).  
- Питание: батарейный блок или аккумулятор.  
- Провода.  

---

### Подключение (пример с L298N)  

- **Двигатели** → к выходам драйвера L298N.  
- **IN1, IN2, IN3, IN4 драйвера** → пины Arduino (например, D8, D9, D10, D11).  
- **VCC драйвера** → питание (7–12 В).  
- **GND драйвера** → общий с Arduino.  
- **ENA, ENB драйвера** → D5, D6 (PWM для скорости).  
- **Voice Recognition Module** → подключается через Serial (RX → D3, TX → D2 с использованием SoftwareSerial).  

---

## Программный код (базовый пример)

```cpp
// Урок 16: Автомобиль-робот с голосовым управлением
// Используется модуль Voice Recognition V3

#include <SoftwareSerial.h>
#include "VoiceRecognitionV3.h"

SoftwareSerial mySerial(2, 3); // RX, TX
VR myVR(mySerial);

uint8_t records[7]; // хранение команд
uint8_t buf[64];

int IN1 = 8;
int IN2 = 9;
int IN3 = 10;
int IN4 = 11;

void setup() {
  Serial.begin(9600);
  mySerial.begin(9600);

  if (myVR.begin()) {
    Serial.println("Модуль голосового управления готов.");
  } else {
    Serial.println("Ошибка: модуль не найден.");
    while (1);
  }

  pinMode(IN1, OUTPUT);
  pinMode(IN2, OUTPUT);
  pinMode(IN3, OUTPUT);
  pinMode(IN4, OUTPUT);

  myVR.clear();  
  myVR.load(0); // Загружаем группу команд (обучить нужно заранее через ПК)
}

void loop() {
  int ret = myVR.recognize(buf, 50);

  if (ret > 0) {
    switch (buf[1]) {
      case 0: Serial.println("Вперёд"); forward(); break;
      case 1: Serial.println("Назад"); backward(); break;
      case 2: Serial.println("Влево"); left(); break;
      case 3: Serial.println("Вправо"); right(); break;
      case 4: Serial.println("Стоп"); stopRobot(); break;
      default: Serial.println("Неизвестная команда"); break;
    }
  }
}

void forward() {
  digitalWrite(IN1, HIGH);
  digitalWrite(IN2, LOW);
  digitalWrite(IN3, HIGH);
  digitalWrite(IN4, LOW);
}

void backward() {
  digitalWrite(IN1, LOW);
  digitalWrite(IN2, HIGH);
  digitalWrite(IN3, LOW);
  digitalWrite(IN4, HIGH);
}

void left() {
  digitalWrite(IN1, LOW);
  digitalWrite(IN2, HIGH);
  digitalWrite(IN3, HIGH);
  digitalWrite(IN4, LOW);
}

void right() {
  digitalWrite(IN1, HIGH);
  digitalWrite(IN2, LOW);
  digital
}

```
Эксперименты

Обучите модуль своим командам (например: «GO», «BACK», «LEFT», «RIGHT», «STOP»).
Попробуйте использовать русские команды («вперёд», «назад»), если модуль корректно их распознаёт.
Добавьте управление скоростью — используйте PWM на ENA и ENB.
Реализуйте режим «автостоп»: если нет команды в течение 5 секунд — робот останавливается.
Сделайте «расширенный словарь»: добавьте команду «Турбо» для максимальной скорости.

Задание для самостоятельной работы

Нарисуйте схему подключения автомобиля с драйвером и голосовым модулем.
Составьте таблицу: команда → действие (вперёд, назад, влево, вправо, стоп).
Реализуйте систему очков: подсчитывайте количество выполненных команд и выводите в Serial Monitor.
Добавьте подсветку (RGB-светодиод): загорается разным цветом в зависимости от команды.
Если есть Bluetooth-модуль, попробуйте сделать гибрид: голосовые команды + команды со смартфона.
